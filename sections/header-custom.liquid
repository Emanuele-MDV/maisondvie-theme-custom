<link rel="stylesheet" href="{{ 'component-loading-overlay.css' | asset_url }}" media="print" onload="this.media='all'">
<script src="{{ 'details-disclosure.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'details-modal.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

<a id="siteBranding">
  <figure>
    {% assign logo = section.settings.logo %}
    <img
    src="{{ logo | image_url: width: '100x' }}"
    alt="{{ logo | default: shop.name | escape }}"
    srcset="
    {% if logo.width > 120 %}{{ logo.src | img_url: '120x' }} 120w{% endif %},
    {% if logo.width > 180 %}{{ logo.src | img_url: '180x' }} 180w{% endif %},
    {% if logo.width > 220 %}{{ logo.src | img_url: '220x' }} 220w{% endif %}
    "
    sizes="
    {% if logo.width > 220 %}(min-width: 1024px) 220px{% endif %},
    {% if logo.width > 180 %}(min-width: 600px) 180px{% endif %},
    {% if logo.width > 120 %}(min-width: 320px) 120px{% endif %},
    100vw"
    width=""
    height=""
    />
  </figure>
</a>

<nav id="mainNavigation">
  <ul>
    {%- for link in section.settings.menu.links -%}
      <li>
        <a href="{{ link.url }}" {% if link.current %} aria-current="page"{% endif %}>
        <span>{{ link.title | escape }}</span>
        
        {% if link.type == 'collection_link' and link.object.image %}
          <figure>            
          <img
          src="{{ link.object.image | img_url: '100x100', crop:'center' }}"
          alt="Shop {{ link.title | escape }} online catalogue"
          width="100"
          height="100"
          srcset=""
          sizes=""
          loading="lazy"
          />
          </figure>
        {% endif %}

          
        </a>
        
        {% if link.levels >= 1 %}
          <ul>
            {%- for childlink in link.links -%}
              <li>
              <a href="{{ childlink.url }}" {% if childlink.current %} aria-current="page"{% endif %}>
              
              <span>{{ childlink.title | escape }}</span>
                
              {% if childlink.type == 'collection_link' and childlink.object.image %}
                <figure>            
                <img
                src="{{ childlink.object.image | img_url: '100x100', crop:'center' }}"
                alt="Shop {{ childlink.title | escape }} online catalogue"
                width=""
                height=""
                srcset=""
                sizes=""
                loading="lazy"
                />
                </figure>
              {% endif %}

              </a>
              
                {% if link.levels >= 2 %}
                  <ul>
                    {%- for grandchildlink in childlink.links -%}
                      <li>
                        <a href="{{ grandchildlink.url }}" {% if grandchildlink.current %} aria-current="page"{% endif %}>
                        <span>{{ grandchildlink.title | escape }}</span>

                        {% if grandchildlink.type == 'collection_link' %}
                        <figure>            
                        <img
                        src="{% if grandchildlink.object.image %}{{ grandchildlink.object.image | img_url: '100x100', crop:'center' }}{% else %}{{ childlink.object.image | img_url: '100x100', crop:'center' }}{% endif %}"
                        alt="Shop {{ grandchildlink.title | escape }} online catalogue"
                        width=""
                        height=""
                        srcset=""
                        sizes=""
                        loading="lazy"
                        />
                        </figure>
                      {% endif %}

                      </a>
                        
                      </li>
                    {%- endfor -%}
                  </ul>
                {% endif %} 
              </li>
            {%- endfor -%}
          </ul>
        {% endif %}
      
      </li>
    {% endfor %}
  </ul>
</nav>

{%- if settings.predictive_search_enabled -%}
  <predictive-search class="search-modal__form" data-loading-text="{{ 'accessibility.loading' | t }}">
{%- endif -%}
  <form action="{{ routes.search_url }}" method="get" role="search" class="search search-modal__form">
    <div class="field">
      <input class="search__input field__input"
        id="Search-In-Modal"
        type="search"
        name="q"
        value=""
        placeholder="{{ 'general.search.search' | t }}"
        {%- if settings.predictive_search_enabled -%}
          role="combobox"
          aria-expanded="false"
          aria-owns="predictive-search-results-list"
          aria-controls="predictive-search-results-list"
          aria-haspopup="listbox"
          aria-autocomplete="list"
          autocorrect="off"
          autocomplete="off"
          autocapitalize="off"
          spellcheck="false"
        {%- endif -%}
      >
      <label class="field__label" for="Search-In-Modal">{{ 'general.search.search' | t }}</label>
      <input type="hidden" name="options[prefix]" value="last">
      <button class="search__button field__button" aria-label="{{ 'general.search.search' | t }}">
        <svg class="icon icon-search" aria-hidden="true" focusable="false" role="presentation">
          <use href="#icon-search">
        </svg>
      </button>
    </div>

    {%- if settings.predictive_search_enabled -%}
      <div class="predictive-search predictive-search--header" tabindex="-1" data-predictive-search>
        <div class="predictive-search__loading-state">
          <svg aria-hidden="true" focusable="false" role="presentation" class="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
            <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
          </svg>
        </div>
      </div>

      <span class="predictive-search-status visually-hidden" role="status" aria-hidden="true"></span>
    {%- endif -%}
  </form>
{%- if settings.predictive_search_enabled -%}
  </predictive-search>
{%- endif -%}

{% schema %}
  {
    "name": "Customized header",
    "tag":"header",
    "class":"header-custom",
    "settings": [
      {
        "type": "image_picker",
        "id": "logo",
        "label": "t:sections.header.settings.logo.label"
      },
      {
        "type": "link_list",
        "id": "menu",
        "default": "main-menu",
        "label": "t:sections.header.settings.menu.label"
      }
    ]
  }
{% endschema %}
