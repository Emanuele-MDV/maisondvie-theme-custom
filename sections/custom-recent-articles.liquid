<div class="page-width narrow">

  <h2>{{ section.settings.section_title }}</h2>

  {% comment %}

  {% assign current_title = article.title %}

  {% capture recent_posts %}
    {% for article in blog.articles %}
      {% unless post.title == current_title %}
        {{ article.title }}
      {% endunless %}
    {% endfor %}
  {% endcapture %}

  {% assign articles_array = recent_posts | split: ', ' %}

  {{ articles_array }}

  {% for post in articles_array %}
    {{ title }}
  {% endfor %}
  
</div>


<article>
  <figure>
    {% assign image = post.image %}
    <img
    src="{{ image.src | img_url: '480x' }}"  
    />
  </figure>
  <p>{{ post.published_at | date: "%b %d, %y" }}</p>
  <h3>{{ post.title }}</h3>
  <a href="{{ post.url }}"><span>Read article</span>{% render 'icon-arrow' %}</a>
</article>
{% endcomment %}


{% assign controllers = '' | split: '' %}
{% for article in blog.articles %}
    {% assign articleName = article.title | split: ', ' %}
    {% assign articleImage = article.image | split: ', ' %}
    {% assign articleLink = article.url | split: ', ' %}
    {% assign controllers = controllers | concat: articleName | concat: articleImage  %}
{% endfor %}


{% for controller in controllers %}
{{ controller }}<br>
{% endfor %}

{% schema %}
  {
    "name": "Custom recent articles",
    "tag":"section",
    "class":"blogs-list",
    "templates":["article"],
    "settings": [
      {
        "type":"text",
        "id":"section_title",
        "label":"Section title",
        "default":"Recent articles"
      }
    ],
    "presets": [
      {
        "name":"Custom recent articles"
      }
    ]
  }
{% endschema %}